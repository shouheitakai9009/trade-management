# 株式トレード管理アプリケーション要件定義書

## 1. 概要

複数ユーザーが利用できる株式トレード管理アプリケーションを開発する。各トレードデータを最小限の入力で登録し、ポジション単位で管理することで買い増しや一部売却にも対応。月次でのパフォーマンスサマリーを確認できるシステム。

## 2. 目的

- スプレッドシートでの管理から移行し、データ入力の効率化を図る
- トレードデータのコピー&修正作業を削減
- 複雑な売買パターン（買い増し、一部売却）にも対応
- 月次パフォーマンスの把握を容易にする

## 3. 機能要件

### 3.1 ユーザー管理

- 複数ユーザーが独立してトレードデータを管理できる
- ユーザー登録・ログイン機能
- シンプルなランディングページからの新規登録・ログインフロー

### 3.2 トレードデータ管理

- トレードデータの登録項目（最小限）:
  - 銘柄コード（銘柄名は自動表示）
  - 売買種別（買い/売り）
  - 金額（手数料込みの合計金額）
  - トレード日（デフォルトは現在日付）
  - 取引種別（現物/信用、デフォルト値あり）
  - 備考（任意）
- 自動入力機能:
  - 銘柄コード入力時に銘柄名を自動表示
  - 買い増し・売却時に銘柄情報を自動入力
  - 損益計算の自動化

### 3.3 ポジション管理

- 銘柄ごとのポジション自動管理
- 買い増し・一部売却・全売却の簡易操作
- 損益の自動計算

### 3.4 トレード一覧表示

- 2 つの表示モード:
  1. 日付順表示: 全トレードを時系列で表示
  2. 銘柄グループ表示: 銘柄ごとにトレードをグループ化
- グラフィカル表示:
  - 買いと売りの関係を視覚的に表現
  - 損益状況をカラーコードで直感的に把握
  - タイムラインでトレードの流れを理解しやすく
- 銘柄詳細ビュー:
  - 特定銘柄のトレード履歴と損益状況の詳細表示
  - 関連する買いと売りのトレードの関係性を視覚化

### 3.5 サマリー機能

- 月次サマリーの表示（レスポンシブデザインでスマホ対応）
  - 平均利益
  - 平均損失率
  - 平均利益率
  - 総トレード数
  - 最大利益率
  - 最大損失率
  - 先月との変化率

## 4. 非機能要件

### 4.1 ユーザビリティ

- 入力画面は極力自動入力を重視し、ユーザーの手間を最小化
- レスポンシブデザインによるスマートフォン対応
- 直感的な UI 設計

### 4.2 セキュリティ

- ユーザー認証によるデータ保護
- 個人のトレードデータは他ユーザーからアクセス不可

### 4.3 パフォーマンス

- レスポンス時間の最適化
- 月次サマリー計算の効率化

## 5. 優先順位とフェーズ分け

### フェーズ 1（MVP - 最小実用製品）

**目標**: 基本的なトレード記録と表示機能の実現

- ユーザー登録・認証機能
- 基本的なトレードデータ登録機能（最小限の入力項目）
- 日付順のトレード一覧表示
- 基本的な月次サマリー表示

### フェーズ 2（機能拡張）

**目標**: ユーザビリティの向上と表示機能の強化

- トレードデータ入力の自動化機能強化
- 銘柄グループ表示の実装
- 月次サマリーの詳細化（先月比較など）
- レスポンシブデザインの最適化

### フェーズ 3（高度な機能）

**目標**: 分析機能と拡張機能の追加

- 銘柄ごとのパフォーマンス分析
- グラフィカル表示の強化
- カスタムレポート機能
- データのインポート/エクスポート機能

### 優先順位付け

**最高優先度（Must Have）**:

- ユーザー認証
- トレードデータの基本的な登録（最小限の入力）
- 日付順のトレード一覧
- 月次サマリーの基本表示

**高優先度（Should Have）**:

- トレードデータ入力の自動化
- 銘柄グループ表示
- レスポンシブデザイン
- 先月比較機能

**中優先度（Could Have）**:

- グラフィカル表示の強化
- 詳細な銘柄分析
- カスタマイズ可能なサマリー表示

**低優先度（Won't Have for Now）**:

- 高度なグラフ表示
- 外部システム連携
- AI による予測分析

## 6. ユーザーストーリーとユースケース

### 主要なユーザーストーリー

#### ログイン前の動線

- 「新規ユーザーとして、私はアプリケーションに登録したい。それは自分のトレードデータを管理し始めるためである。」
- 「ユーザーとして、私は簡単にログインしたい。それは自分のトレードデータにアクセスするためである。」
- 「ユーザーとして、私はパスワードをリセットできるようにしたい。それはパスワードを忘れた場合でもアカウントにアクセスできるようにするためである。」
- 「訪問者として、私はアプリケーションの概要を確認したい。それは登録する価値があるかどうかを判断するためである。」

#### トレード記録

- 「トレーダーとして、私は最小限の入力で新しい買いトレードを記録したい。それは入力の手間を減らすためである。」
- 「トレーダーとして、私は既存ポジションへの買い増しを簡単に記録したい。それは同じデータを何度も入力する手間を省くためである。」
- 「トレーダーとして、私はポジションの一部を売却したい。それは一部利益確定をするためである。」
- 「トレーダーとして、私はポジション全体をワンクリックで売却したい。それは売却操作を簡略化するためである。」

#### トレード閲覧

- 「トレーダーとして、私はトレード履歴を日付順に確認したい。それは時系列での取引状況を把握するためである。」
- 「トレーダーとして、私はトレード履歴を銘柄ごとにグループ化して確認したい。それは銘柄ごとのパフォーマンスを把握するためである。」
- 「トレーダーとして、私は特定の銘柄のトレード履歴と損益状況を詳細に確認したい。それは銘柄ごとの取引戦略を評価するためである。」

#### パフォーマンス分析

- 「トレーダーとして、私は手動計算なしで月次パフォーマンスを確認したい。それは月間の取引成績を素早く評価するためである。」
- 「トレーダーとして、私は先月と今月のパフォーマンスを比較したい。それは改善点や傾向を把握するためである。」

### 主要なユースケース概要

#### 1. ユーザー登録

- アクター: 未登録ユーザー
- 前提条件: なし
- 基本フロー:
  1. ユーザーがランディングページから「新規登録」ボタンをクリック
  2. メールアドレス、パスワード、ユーザー名などの必要情報を入力
  3. 登録ボタンをクリック
  4. アカウントが作成され、ダッシュボードにリダイレクト

#### 2. 新規トレード登録

- アクター: トレーダー
- 前提条件: ユーザーがログイン済み
- 基本フロー:
  1. トレーダーが「新規トレード」ボタンをクリック
  2. 銘柄コード、売買種別、金額を入力
  3. 必要に応じてトレード日、取引種別、備考を入力
  4. 「保存」ボタンをクリック
  5. 新しいトレードがトレード一覧に追加される

#### 3. 既存ポジションの買い増し

- アクター: トレーダー
- 前提条件: ユーザーがログイン済み、対象銘柄の買いポジションが存在する
- 基本フロー:
  1. トレーダーがトレード一覧から対象銘柄の「アクション」ボタンをクリック
  2. 「買い増し」を選択
  3. 金額を入力
  4. 「保存」ボタンをクリック
  5. 新しい買いトレードが追加される

#### 4. ポジションの売却

- アクター: トレーダー
- 前提条件: ユーザーがログイン済み、対象銘柄の買いポジションが存在する
- 基本フロー:
  1. トレーダーがトレード一覧から対象銘柄の「アクション」ボタンをクリック
  2. 「売却」または「全売却」を選択
  3. 金額を入力
  4. 「売却実行」ボタンをクリック
  5. 新しい売りトレードが追加され、損益が自動計算される

#### 5. トレード一覧の表示切替

- アクター: トレーダー
- 前提条件: ユーザーがログイン済み、トレードデータが存在する
- 基本フロー:
  1. トレーダーがトレード一覧画面を表示
  2. 「日付順表示」または「銘柄グループ表示」ボタンをクリック
  3. 選択した表示モードでトレードデータが表示される

#### 6. 月次サマリー閲覧

- アクター: トレーダー
- 前提条件: ユーザーがログイン済み、トレードデータが存在する
- 基本フロー:
  1. トレーダーが「月次サマリー」タブをクリック
  2. 表示する月を選択
  3. 選択月のサマリーデータが表示される
  4. 「前月比較」トグルをオンにすると比較データも表示される

## 7. 技術スタック

- フロントエンド: React (TypeScript)
- バックエンド: Laravel (PHP)
- データベース: MySQL/PostgreSQL
